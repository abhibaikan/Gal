pipeline {
    agent any
    tools {
            maven 'maven'
        }
    stages {
        stage('code compile') {
            steps {
                sh "mvn compile"
            }
        }
        stage('code_review') {
            steps {
                sh "mvn -P metrics pmd:pmd"
            }
        }
        stage('testing') {
            steps {
                sh "mvn test"
            }
            stage('metric check') {
                        steps {
                            sh "mvn cobertura:cobertura -Dcobertura.report.format=xml"
                        }
             stage('package') {
                                     steps {
                                         sh "mvn package"
                                     }
        }
    }
}